<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE sqlMap
PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN"
"http://ibatis.apache.org/dtd/sql-map-2.dtd">
<sqlMap namespace="Person">
	<select id="getPersonDefaultInfo" resultClass="personDB">
		SELECT
		id as id,
		updated as updated,
		aboutMe as aboutMe,
		age as age,
		birthday as birthday,
		bodyType_build as bodyType_build,
		bodyType_eyeColor as bodyType_eyeColor,
		bodyType_hairColor as bodyType_hairColor,
		bodyType_height as bodyType_height,
		bodyType_weight as bodyType_weight,
		children as children,
		displayName as displayName,
		drinker as drinker,
		ethnicity as ethnicity,
		fashion as fashion,
		gender as gender,
		happiestWhen as happiestWhen,
		hasApp as hasApp,
		humor as humor,
		jobInterests as jobInterests,
		livingArrangement as livingArrangement,
		name_additionalName as name_additionalName,
		name_familyName as name_familyName,
		name_givenName as name_givenName,
		name_honorificPrefix as name_honorificPrefix,
		name_honorificSuffix as name_honorificSuffix,
		name_formatted as name_formatted,
		networkPresence as networkPresence,
		nickName as nickName,
		pets as pets,
		politicalViews as politicalViews,
		preferredUsername as preferredUsername,
		relationshipStatus as relationshipStatus,
		religion as religion,
		romance as romance,
		scaredOf as scaredOf,
		sexualOrientation as sexualOrientation,
		smoker as smoker,
		status as status,
		utcOffset as utcOffset,
		currentLocation_country as currentLocation_country,
		currentLocation_latitude as currentLocation_latitude,
		currentLocation_longitude as currentLocation_longitude,
		currentLocation_locality as currentLocation_locality,
		currentLocation_postalCode as currentLocation_postalCode,
		currentLocation_region as currentLocation_region,
		currentLocation_streetAddress as currentLocation_streetAddress,
		currentLocation_type as currentLocation_type,
		currentLocation_formatted as currentLocation_formatted,
		currentLocation_primary as currentLocation_primary,
		profilesongurl_value as profilesongurl_value,
		profilesongurl_link_text as profilesongurl_linkText,
		profilesongurl_type as profilesongurl_type,
		profilesongurl_primary as profilesongurl_primary,
		profilevideourl_value as profilevideourl_value,
		profilevideourl_link_text as profilevideourl_linkText,
		profilevideourl_type as profilevideourl_type,
		profilevideourl_primary as profilevideourl_primary
		FROM SHINDIG_PERSON
		WHERE id = #id#
</select>

	<!--
		Use PersonListStringDB object (JavaBean) properties as parameters for
		select. Each of the parameters in the #hash# symbols is a JavaBeans
		property.
	-->
	<select id="getPersonListStringOneByOne" parameterClass="PersonAddInfoQueryParam"
		resultClass="java.lang.String">
		SELECT
		value
		FROM SHINDIG_PERSON_ADDITIONAL_INFO_1
		WHERE user_id = #userId# and attribute = #attribute#
</select>

	<!--
		Use PersonListFieldDB object (JavaBean) properties as parameters for
		select. Each of the parameters in the #hash# symbols is a JavaBeans
		property.
	-->
	<select id="getPersonListFieldOneByOne" parameterClass="PersonAddInfoQueryParam"
		resultClass="ListField">
		SELECT
		field_type as type,
		field_value as `value`,
		field_primary as `primary`
		FROM SHINDIG_PERSON_ADDITIONAL_INFO_2
		WHERE user_id = #userId# and attribute = #attribute#
</select>


	<!-- ... -->
	<select id="getPersonAccounts" parameterClass="java.lang.String"
		resultClass="Account">
		SELECT
		domain as domain,
		user_id as userId,
		user_name as userName
		FROM SHINDIG_PERSON_ACCOUNTS
		WHERE user_id = #id#
</select>

	<!-- ... -->
	<select id="getPersonAddresses" parameterClass="java.lang.String"
		resultClass="Address">
		SELECT
		country as country,
		latitude as latitude,
		longitude as longitude,
		locality as locality,
		postal_code as postalCode,
		region as region,
		street_address as streetAddress,
		type as type,
		formatted as formatted,
		Address_primary as `primary`
		FROM SHINDIG_PERSON_ADDRESSES
		WHERE user_id = #id#
</select>

	<!-- ... -->
	<select id="getPersonUrls" parameterClass="java.lang.String"
		resultClass="Url">
		SELECT
		value as value,
		type as type,
		url_primary as `primary`,
		link_text as linkText
		FROM SHINDIG_PERSON_URLS
		WHERE user_id = #id#
</select>


	<!--  ... -->
	<select id="getPersonOrganizations" parameterClass="java.lang.String"
		resultClass="OrganizationDB">
		SELECT
		description as description,
		end_date as endData,
		field as field,
		name as name,
		salary as salary,
		start_date as startDate,
		sub_field as subField,
		title as title,
		webpage as webpage,
		type as type,
		organization_primary as `primary`,
		address_country as address_country,
		address_latitude as address_latitude,
		address_longitude as address_longitude,
		address_longitude as address_longitude,
		address_postal_code as address_postal_code,
		address_region as address_region,
		address_street_address as address_street_address,
		address_type as address_type,
		address_formatted as address_formatted,
		address_primary as address_primary
		FROM SHINDIG_PERSON_ORGANIZATIONS
		WHERE user_id = #id#
</select>


	<!-- ... -->
	<select id="getAllUserIds" resultClass="java.lang.String">
		SELECT
		id
		FROM SHINDIG_PERSON
</select>

	<!-- ... -->
	<select id="getFriendsIds" resultClass="java.lang.String">
		SELECT
		friend_id
		FROM SKT_USER_FRIENDS
		WHERE user_id = #userIdString#
</select>

	<!-- ... -->
	<select id="findOutIfHasApp" parameterClass="java.lang.String"
		resultClass="java.lang.Boolean">
		SELECT
		hasApp
		FROM SHINDIG_PERSON
		WHERE id = #friendId#
</select>


	<!-- ... -->
	<select id="getPersonAppData" parameterClass="java.lang.String"
		resultClass="AppDataDB">
		SELECT
		app_id as appId,
		user_id as userId,
		field as field,
		data as data
		FROM SHINDIG_PERSON_APP_DATA
		WHERE user_id = #userId#
</select>


	<!-- ... -->
	<select id="deletePersonAppDataWithAppId" parameterClass="AppDataDB">
		DELETE FROM
		SHINDIG_PERSON_APP_DATA
		WHERE app_id = #appId# and user_id = #userId#
</select>

	<!-- ... -->
	<select id="deletePersonAppData" parameterClass="java.lang.String">
		DELETE FROM
		SHINDIG_PERSON_APP_DATA
		WHERE user_id = #userId#
</select>


	<!-- ... -->
	<select id="updatePersonAppData" parameterClass="AppDataDB">
		UPDATE SHINDIG_PERSON_APP_DATA
		SET data = #data#
		WHERE app_id = #appId# and user_id = #userId#
</select>
</sqlMap>